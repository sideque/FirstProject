<%- include("../../views/partials/user/header") %>

<section id="home-section" class="hero">
  <div class="home-slider owl-carousel">
    <div class="slider-item js-fullheight">
      <div class="overlay"></div>
      <div class="container-fluid p-0">
        <div class="row d-md-flex no-gutters slider-text align-items-center justify-content-end" data-scrollax-parent="true">
          <img class="one-third order-md-last img-fluid" src="/images/p39-removebg-preview.png" alt="Latest mobile phone model">
          <div class="one-forth d-flex align-items-center ftco-animate" data-scrollax="properties: { translateY: '70%' }">
            <div class="text">
              <span class="subheading">#New Arrival</span>
              <div class="horizontal">
                <h1 class="mb-4 mt-3">Latest Mobile Collections</h1>
                <p class="mb-4">Unlock the ultimate connectivity experience! The mobile phone of your dreams is now just a tap away</p>
                <p><a href="/products" class="btn-custom">Discover Now</a></p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="slider-item js-fullheight">
      <div class="overlay"></div>
      <div class="container-fluid p-0">
        <div class="row d-flex no-gutters slider-text align-items-center justify-content-end" data-scrollax-parent="true">
          <img class="one-third order-md-last img-fluid" src="/images/p32-removebg-preview.png" alt="Newest mobile phone model">
          <div class="one-forth d-flex align-items-center ftco-animate" data-scrollax="properties: { translateY: '70%' }">
            <div class="text">
              <span class="subheading">#New Arrival</span>
              <div class="horizontal">
                <h1 class="mb-4 mt-3">Newest Mobile Arrivals</h1>
                <p class="mb-4">Experience cutting-edge technology with the latest models! The phone you’ve always wanted is now within reach—connect effortlessly with just a tap.</p>
                <p><a href="/products" class="btn-custom">Discover Now</a></p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="ftco-section ftco-no-pt ftco-no-pb">
  <div class="container">
    <div class="row no-gutters ftco-services">
      <div class="col-lg-4 text-center d-flex align-self-stretch ftco-animate">
        <div class="media block-6 services p-4 py-md-5">
          <div class="icon d-flex justify-content-center align-items-center mb-4">
            <span class="flaticon-bag"></span>
          </div>
          <div class="media-body">
            <h3 class="heading">Free Shipping</h3>
            <p>Every package tells a story, and every gift is a treasure waiting to be unwrapped.</p>
          </div>
        </div>      
      </div>
      <div class="col-lg-4 text-center d-flex align-self-stretch ftco-animate">
        <div class="media block-6 services p-4 py-md-5">
          <div class="icon d-flex justify-content-center align-items-center mb-4">
            <span class="flaticon-customer-service"></span>
          </div>
          <div class="media-body">
            <h3 class="heading">Support Customer</h3>
            <p>Here for you, every hour, every day—because your satisfaction never clocks out</p>
          </div>
        </div>    
      </div>
      <div class="col-lg-4 text-center d-flex align-self-stretch ftco-animate">
        <div class="media block-6 services p-4 py-md-5">
          <div class="icon d-flex justify-content-center align-items-center mb-4">
            <span class="flaticon-payment-security"></span>
          </div>
          <div class="media-body">
            <h3 class="heading">Secure Payments</h3>
            <p>Shop with confidence—your trust and safety are our top priorities.</p>
          </div>
        </div>      
      </div>
    </div>
  </div>
</section>

<section class="ftco-section bg-light">
  <div class="container">
    <div class="row justify-content-center mb-3 pb-3">
      <div class="col-md-12 heading-section text-center ftco-animate">
        <h2 class="mb-4">Our Bestsellers</h2>
        <p>These are our assets that we sell without telling a client to think twice while buying</p>
      </div>
    </div>       
  </div>
  <div class="container">
    <div class="row">
      <% if (products && products.length > 0) { %>
        <% products.forEach(function(product) { %>
          <div class="col-sm-12 col-md-6 col-lg-3 ftco-animate d-flex">
            <div class="product d-flex flex-column">
              <a href="/product?id=<%= product._id %>" class="img-prod">
                <img class="img-fluid" 
                     src="<%= product.image || 'https://placehold.co/300x300/darkgray/white?text=No+Image' %>" 
                     alt="<%= product.name %> mobile phone">
                <% if (product.discount && product.discount > 0) { %>
                  <span class="status"><%= product.discount %>% Off</span>
                <% } %>
                <div class="overlay"></div>
              </a>
              <div class="text py-3 pb-4 px-3">
                <div class="d-flex">
                  <div class="cat">
                    <span><%= product.category || 'Lifestyle' %></span> <!-- Now handles populated name -->
                  </div>
                  <div class="rating">
                    <p class="text-right mb-0">
                      <% for (let i = 0; i < 5; i++) { %>
                        <span class="ion-ios-star<%= i < (product.rating || 0) ? '' : '-outline' %>"></span>
                      <% } %>
                    </p>
                  </div>
                </div>
                <h3><a href="/product/<%= product._id %>"><%= product.name %></a></h3>
                <div class="pricing">
                  <p class="price">
                    <% if (product.discount && product.discount > 0) { %>
                      <span class="mr-2 price-dc">₹<%= product.price.toLocaleString('en-IN') %></span>
                      <span class="price-sale">₹<%= product.salePrice.toLocaleString('en-IN') %></span>
                    <% } else { %>
                      <span>₹<%= (product.salePrice || product.price).toLocaleString('en-IN') %></span>
                    <% } %>
                  </p>
                </div>
                <p class="bottom-area d-flex px-3">
                  <a href="/cart/add/<%= product._id %>" class="add-to-cart text-center py-2 mr-1">
                    <span>Add to cart <i class="ion-ios-add ml-1"></i></span>
                  </a>
                  <a href="/buy/<%= product._id %>" class="buy-now text-center py-2">
                    <span>Buy now <i class="ion-ios-cart ml-1"></i></span>
                  </a>
                </p>
              </div>
            </div>
          </div>
        <% }); %>
      <% } else { %>
        <div class="col-12 text-center">
          <h4>No Products Available</h4>
          <p>Check back soon for exciting new arrivals!</p>
        </div>
      <% } %>
    </div>
  </div>

  
</section>

<%- include("../../views/partials/user/footer") %>